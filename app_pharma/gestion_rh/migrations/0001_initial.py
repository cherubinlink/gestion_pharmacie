# Generated by Django 6.0 on 2026-01-10 15:40

import django.core.validators
import django.db.models.deletion
import uuid
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('gestion_compte', '0002_profilutilisateur'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Client',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('client_number', models.CharField(max_length=50, unique=True, verbose_name='Numéro client')),
                ('loyalty_points', models.IntegerField(default=0, verbose_name='Points de fidélité')),
                ('medical_notes', models.TextField(blank=True, help_text='Notes médicales confidentielles', verbose_name='Notes médicales')),
                ('allergies', models.JSONField(default=list, help_text='Liste des allergies', verbose_name='Allergies')),
                ('preferred_payment_method', models.CharField(blank=True, max_length=50, verbose_name='Méthode de paiement préférée')),
                ('is_active', models.BooleanField(default=True, verbose_name='Actif')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('pharmacie', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='clients', to='gestion_compte.pharmacie', verbose_name='Pharmacie')),
                ('utilisateur', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='client_profile', to=settings.AUTH_USER_MODEL, verbose_name='Utilisateur')),
            ],
            options={
                'verbose_name': 'Client',
                'verbose_name_plural': 'Clients',
                'db_table': 'hr_clients',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ClientTransferHistory',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('transfer_date', models.DateTimeField(auto_now_add=True, verbose_name='Date de transfert')),
                ('reason', models.TextField(verbose_name='Raison du transfert')),
                ('loyalty_points_transferred', models.IntegerField(default=0, verbose_name='Points de fidélité transférés')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transfer_history', to='gestion_rh.client', verbose_name='Client')),
                ('from_pharmacie', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='client_transfers_out', to='gestion_compte.pharmacie', verbose_name='De la pharmacie')),
                ('to_pharmacie', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='client_transfers_in', to='gestion_compte.pharmacie', verbose_name='Vers la pharmacie')),
                ('transferred_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='client_transfers_made', to=settings.AUTH_USER_MODEL, verbose_name='Transféré par')),
            ],
            options={
                'verbose_name': 'Historique de transfert de client',
                'verbose_name_plural': 'Historiques de transferts de clients',
                'db_table': 'hr_client_transfer_history',
                'ordering': ['-transfer_date'],
            },
        ),
        migrations.CreateModel(
            name='Employee',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('employee_id', models.CharField(max_length=50, unique=True, verbose_name='ID Employé')),
                ('salary', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))], verbose_name='Salaire')),
                ('hire_date', models.DateField(verbose_name="Date d'embauche")),
                ('employment_status', models.CharField(choices=[('active', 'Actif'), ('on_leave', 'En congé'), ('suspended', 'Suspendu'), ('terminated', 'Licencié')], default='active', max_length=20, verbose_name="Statut d'emploi")),
                ('emergency_contact_name', models.CharField(blank=True, max_length=255, verbose_name="Contact d'urgence (nom)")),
                ('emergency_contact_phone', models.CharField(blank=True, max_length=20, verbose_name="Contact d'urgence (téléphone)")),
                ('documents', models.JSONField(default=list, help_text='Liste des documents (CV, diplômes, etc.)')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('pharmacie', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='employees', to='gestion_compte.pharmacie', verbose_name='Pharmacie')),
                ('utilisateur', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='employee_profile', to=settings.AUTH_USER_MODEL, verbose_name='Utilisateur')),
            ],
            options={
                'verbose_name': 'Employé',
                'verbose_name_plural': 'Employés',
                'db_table': 'hr_employees',
                'ordering': ['-hire_date'],
            },
        ),
        migrations.CreateModel(
            name='Commission',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('commission_type', models.CharField(max_length=100)),
                ('description', models.TextField()),
                ('calculation_basis', models.JSONField(help_text='Base de calcul (ventes, objectifs, etc.)')),
                ('period_start', models.DateField()),
                ('period_end', models.DateField()),
                ('is_paid', models.BooleanField(default=False)),
                ('paid_date', models.DateField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='commissions_created', to=settings.AUTH_USER_MODEL)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='commissions', to='gestion_rh.employee')),
            ],
            options={
                'db_table': 'commissions',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Bonus',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('bonus_type', models.CharField(choices=[('performance', 'Prime de performance'), ('holiday', 'Prime de vacances'), ('annual', 'Prime annuelle'), ('exceptional', 'Prime exceptionnelle'), ('goal', 'Prime sur objectif'), ('other', 'Autre')], max_length=20)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('description', models.TextField()),
                ('calculation_basis', models.JSONField(blank=True, help_text='Base de calcul si applicable', null=True)),
                ('period_start', models.DateField()),
                ('period_end', models.DateField()),
                ('is_paid', models.BooleanField(default=False)),
                ('paid_date', models.DateField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('approved_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='bonuses_approved', to=settings.AUTH_USER_MODEL)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='bonuses', to='gestion_rh.employee')),
            ],
            options={
                'db_table': 'bonuses',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='AbsenceRecord',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('date', models.DateField(verbose_name='Date')),
                ('absence_type', models.CharField(choices=[('authorized', 'Absence autorisée'), ('unauthorized', 'Absence non autorisée'), ('late', 'Retard'), ('early_departure', 'Départ anticipé')], max_length=20, verbose_name="Type d'absence")),
                ('scheduled_start', models.TimeField(verbose_name='Heure prévue de début')),
                ('actual_start', models.TimeField(blank=True, null=True, verbose_name='Heure réelle de début')),
                ('scheduled_end', models.TimeField(verbose_name='Heure prévue de fin')),
                ('actual_end', models.TimeField(blank=True, null=True, verbose_name='Heure réelle de fin')),
                ('duration_minutes', models.IntegerField(default=0, help_text="Durée de l'absence/retard en minutes", verbose_name='Durée (minutes)')),
                ('reason', models.TextField(blank=True, verbose_name='Raison')),
                ('is_justified', models.BooleanField(default=False, verbose_name='Justifié')),
                ('justification', models.TextField(blank=True, verbose_name='Justification')),
                ('justification_documents', models.JSONField(default=list, verbose_name='Documents justificatifs')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('reported_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='absences_reported', to=settings.AUTH_USER_MODEL, verbose_name='Signalé par')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='absences', to='gestion_rh.employee', verbose_name='Employé')),
            ],
            options={
                'verbose_name': "Enregistrement d'absence",
                'verbose_name_plural': "Enregistrements d'absences",
                'db_table': 'hr_absence_records',
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='EmployeeTransferHistory',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('transfer_date', models.DateTimeField(auto_now_add=True, verbose_name='Date de transfert')),
                ('reason', models.TextField(verbose_name='Raison du transfert')),
                ('old_salary', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Ancien salaire')),
                ('new_salary', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Nouveau salaire')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transfer_history', to='gestion_rh.employee', verbose_name='Employé')),
                ('from_pharmacie', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transfers_out', to='gestion_compte.pharmacie', verbose_name='De la pharmacie')),
                ('to_pharmacie', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transfers_in', to='gestion_compte.pharmacie', verbose_name='Vers la pharmacie')),
                ('transferred_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='employee_transfers_made', to=settings.AUTH_USER_MODEL, verbose_name='Transféré par')),
            ],
            options={
                'verbose_name': "Historique de transfert d'employé",
                'verbose_name_plural': "Historiques de transferts d'employés",
                'db_table': 'hr_employee_transfer_history',
                'ordering': ['-transfer_date'],
            },
        ),
        migrations.CreateModel(
            name='LeaveRequest',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('leave_type', models.CharField(choices=[('annual', 'Congé annuel'), ('sick', 'Congé maladie'), ('maternity', 'Congé maternité'), ('paternity', 'Congé paternité'), ('unpaid', 'Congé sans solde'), ('emergency', "Congé d'urgence"), ('other', 'Autre')], max_length=20, verbose_name='Type de congé')),
                ('start_date', models.DateField(verbose_name='Date de début')),
                ('end_date', models.DateField(verbose_name='Date de fin')),
                ('total_days', models.IntegerField(validators=[django.core.validators.MinValueValidator(1)], verbose_name='Nombre de jours')),
                ('reason', models.TextField(verbose_name='Raison')),
                ('supporting_documents', models.JSONField(default=list, help_text='Documents justificatifs', verbose_name='Documents justificatifs')),
                ('status', models.CharField(choices=[('pending', 'En attente'), ('approved', 'Approuvé'), ('rejected', 'Refusé'), ('cancelled', 'Annulé')], default='pending', max_length=20, verbose_name='Statut')),
                ('reviewed_at', models.DateTimeField(blank=True, null=True, verbose_name='Date de révision')),
                ('review_notes', models.TextField(blank=True, verbose_name='Notes de révision')),
                ('replacement_arranged', models.BooleanField(default=False, verbose_name='Remplacement organisé')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='leave_requests', to='gestion_rh.employee', verbose_name='Employé')),
                ('reviewed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='leave_requests_reviewed', to=settings.AUTH_USER_MODEL, verbose_name='Révisé par')),
            ],
            options={
                'verbose_name': 'Demande de congé',
                'verbose_name_plural': 'Demandes de congés',
                'db_table': 'hr_leave_requests',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PerformanceMetrics',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('period_start', models.DateField()),
                ('period_end', models.DateField()),
                ('total_sales', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('total_transactions', models.IntegerField(default=0)),
                ('average_transaction_value', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10)),
                ('punctuality_rate', models.DecimalField(decimal_places=2, default=Decimal('100.00'), help_text='Pourcentage de ponctualité', max_digits=5)),
                ('attendance_rate', models.DecimalField(decimal_places=2, default=Decimal('100.00'), help_text='Pourcentage de présence', max_digits=5)),
                ('customer_satisfaction_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(5)])),
                ('efficiency_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('custom_metrics', models.JSONField(default=dict, help_text='Métriques personnalisées additionnelles')),
                ('calculated_at', models.DateTimeField(auto_now=True)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='performance_metrics', to='gestion_rh.employee')),
            ],
            options={
                'db_table': 'performance_metrics',
                'ordering': ['-period_end'],
            },
        ),
        migrations.CreateModel(
            name='PerformanceReview',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('review_period_start', models.DateField()),
                ('review_period_end', models.DateField()),
                ('review_date', models.DateField()),
                ('overall_rating', models.DecimalField(decimal_places=2, max_digits=3, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(5)])),
                ('criteria_scores', models.JSONField(help_text='Scores par critère: {critère: score}')),
                ('strengths', models.TextField()),
                ('areas_for_improvement', models.TextField()),
                ('goals', models.JSONField(default=list, help_text='Objectifs fixés pour la prochaine période')),
                ('employee_comments', models.TextField(blank=True)),
                ('action_plan', models.TextField()),
                ('next_review_date', models.DateField()),
                ('documents', models.JSONField(default=list)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='performance_reviews', to='gestion_rh.employee')),
                ('reviewer', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reviews_conducted', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'performance_reviews',
                'ordering': ['-review_date'],
            },
        ),
        migrations.CreateModel(
            name='ReplacementRequest',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('date', models.DateField(verbose_name='Date')),
                ('start_time', models.TimeField(verbose_name='Heure de début')),
                ('end_time', models.TimeField(verbose_name='Heure de fin')),
                ('reason', models.TextField(verbose_name='Raison')),
                ('status', models.CharField(choices=[('pending', 'En attente'), ('approved', 'Approuvé'), ('rejected', 'Refusé'), ('completed', 'Terminé'), ('cancelled', 'Annulé')], default='pending', max_length=20, verbose_name='Statut')),
                ('approved_at', models.DateTimeField(blank=True, null=True, verbose_name="Date d'approbation")),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='replacements_approved', to=settings.AUTH_USER_MODEL, verbose_name='Approuvé par')),
                ('replacement_employee', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='replacement_requests_received', to='gestion_rh.employee', verbose_name='Employé remplaçant')),
                ('requesting_employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='replacement_requests_made', to='gestion_rh.employee', verbose_name='Employé demandeur')),
            ],
            options={
                'verbose_name': 'Demande de remplacement',
                'verbose_name_plural': 'Demandes de remplacement',
                'db_table': 'hr_replacement_requests',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Role',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100, verbose_name='Nom du rôle')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('permissions', models.JSONField(default=dict, help_text='Structure: {module: [permissions]}')),
                ('is_default', models.BooleanField(default=False, help_text='Rôles par défaut du système (pharmacien, assistant, etc.)')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('pharmacie', models.ForeignKey(blank=True, help_text="Si null, c'est un rôle global", null=True, on_delete=django.db.models.deletion.CASCADE, related_name='roles', to='gestion_compte.pharmacie')),
            ],
            options={
                'verbose_name': 'Rôle',
                'verbose_name_plural': 'Rôles',
                'db_table': 'hr_roles',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Promotion',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('old_salary', models.DecimalField(decimal_places=2, max_digits=10)),
                ('new_salary', models.DecimalField(decimal_places=2, max_digits=10)),
                ('promotion_date', models.DateField()),
                ('reason', models.TextField()),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('approved_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='promotions_approved', to=settings.AUTH_USER_MODEL)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='promotions', to='gestion_rh.employee')),
                ('new_role', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='promotions_to', to='gestion_rh.role')),
                ('old_role', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='promotions_from', to='gestion_rh.role')),
            ],
            options={
                'db_table': 'promotions',
                'ordering': ['-promotion_date'],
            },
        ),
        migrations.AddField(
            model_name='employee',
            name='role',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='employees', to='gestion_rh.role', verbose_name='Rôle'),
        ),
        migrations.CreateModel(
            name='TimeEntry',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('entry_type', models.CharField(choices=[('clock_in', 'Entrée'), ('clock_out', 'Sortie'), ('break_start', 'Début de pause'), ('break_end', 'Fin de pause')], max_length=20)),
                ('timestamp', models.DateTimeField()),
                ('method', models.CharField(choices=[('badge', 'Badge'), ('qr_code', 'QR Code'), ('biometric', 'Biométrie'), ('pin', 'Code PIN'), ('manual', 'Manuel')], max_length=20)),
                ('location', models.JSONField(blank=True, help_text='Coordonnées GPS si applicable', null=True)),
                ('device_info', models.JSONField(blank=True, help_text='Informations sur le dispositif utilisé', null=True)),
                ('is_manual', models.BooleanField(default=False)),
                ('manual_entry_reason', models.TextField(blank=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='time_entries', to='gestion_rh.employee')),
                ('manual_entry_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='manual_time_entries', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'time_entries',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='Training',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField()),
                ('provider', models.CharField(max_length=255)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('duration_hours', models.DecimalField(decimal_places=2, max_digits=5)),
                ('cost', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10)),
                ('status', models.CharField(choices=[('scheduled', 'Planifié'), ('in_progress', 'En cours'), ('completed', 'Terminé'), ('cancelled', 'Annulé')], default='scheduled', max_length=20)),
                ('certificate_obtained', models.BooleanField(default=False)),
                ('certificate_url', models.URLField(blank=True)),
                ('score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('feedback', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='trainings', to='gestion_rh.employee')),
            ],
            options={
                'db_table': 'trainings',
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='Warning',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('severity', models.CharField(choices=[('verbal', 'Avertissement verbal'), ('written', 'Avertissement écrit'), ('final', 'Avertissement final'), ('suspension', 'Suspension')], max_length=20)),
                ('date_issued', models.DateField()),
                ('reason', models.TextField()),
                ('description', models.TextField()),
                ('action_taken', models.TextField()),
                ('documents', models.JSONField(default=list)),
                ('is_acknowledged', models.BooleanField(default=False)),
                ('acknowledged_at', models.DateTimeField(blank=True, null=True)),
                ('employee_response', models.TextField(blank=True)),
                ('expiry_date', models.DateField(blank=True, help_text="Date d'expiration de l'avertissement", null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='warnings', to='gestion_rh.employee')),
                ('issued_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='warnings_issued', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'warnings',
                'ordering': ['-date_issued'],
            },
        ),
        migrations.CreateModel(
            name='WorkSchedule',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('date', models.DateField(verbose_name='Date')),
                ('shift_type', models.CharField(choices=[('day', 'Jour'), ('night', 'Nuit'), ('custom', 'Personnalisé')], max_length=20, verbose_name='Type de shift')),
                ('start_time', models.TimeField(verbose_name='Heure de début')),
                ('end_time', models.TimeField(verbose_name='Heure de fin')),
                ('is_recurring', models.BooleanField(default=False, verbose_name='Récurrent')),
                ('recurrence_rule', models.JSONField(blank=True, help_text='Règle de récurrence (RRULE)', null=True, verbose_name='Règle de récurrence')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='schedules_created', to=settings.AUTH_USER_MODEL, verbose_name='Créé par')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='work_schedules', to='gestion_rh.employee', verbose_name='Employé')),
            ],
            options={
                'verbose_name': 'Planning de travail',
                'verbose_name_plural': 'Plannings de travail',
                'db_table': 'hr_work_schedules',
                'ordering': ['date', 'start_time'],
            },
        ),
        migrations.CreateModel(
            name='WorkSession',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('date', models.DateField()),
                ('scheduled_start', models.TimeField()),
                ('scheduled_end', models.TimeField()),
                ('actual_hours', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5)),
                ('break_duration', models.IntegerField(default=0, help_text='Durée totale des pauses en minutes')),
                ('overtime_hours', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5)),
                ('is_late', models.BooleanField(default=False)),
                ('late_duration', models.IntegerField(default=0, help_text='Durée du retard en minutes')),
                ('is_complete', models.BooleanField(default=False)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('clock_in', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sessions_started', to='gestion_rh.timeentry')),
                ('clock_out', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='sessions_ended', to='gestion_rh.timeentry')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='work_sessions', to='gestion_rh.employee')),
            ],
            options={
                'db_table': 'work_sessions',
                'ordering': ['-date'],
            },
        ),
        migrations.AddIndex(
            model_name='client',
            index=models.Index(fields=['pharmacie', 'is_active'], name='hr_clients_pharmac_69d336_idx'),
        ),
        migrations.AddIndex(
            model_name='client',
            index=models.Index(fields=['client_number'], name='hr_clients_client__8f8bc9_idx'),
        ),
        migrations.AddIndex(
            model_name='clienttransferhistory',
            index=models.Index(fields=['client', '-transfer_date'], name='hr_client_t_client__e5fa61_idx'),
        ),
        migrations.AddIndex(
            model_name='commission',
            index=models.Index(fields=['employee', '-created_at'], name='commissions_employe_200587_idx'),
        ),
        migrations.AddIndex(
            model_name='commission',
            index=models.Index(fields=['is_paid', 'period_end'], name='commissions_is_paid_d84163_idx'),
        ),
        migrations.AddIndex(
            model_name='bonus',
            index=models.Index(fields=['employee', '-created_at'], name='bonuses_employe_ac228d_idx'),
        ),
        migrations.AddIndex(
            model_name='bonus',
            index=models.Index(fields=['is_paid'], name='bonuses_is_paid_80d950_idx'),
        ),
        migrations.AddIndex(
            model_name='absencerecord',
            index=models.Index(fields=['employee', '-date'], name='hr_absence__employe_3db909_idx'),
        ),
        migrations.AddIndex(
            model_name='absencerecord',
            index=models.Index(fields=['absence_type', 'is_justified'], name='hr_absence__absence_fc0601_idx'),
        ),
        migrations.AddIndex(
            model_name='absencerecord',
            index=models.Index(fields=['date'], name='hr_absence__date_9cd684_idx'),
        ),
        migrations.AddIndex(
            model_name='employeetransferhistory',
            index=models.Index(fields=['employee', '-transfer_date'], name='hr_employee_employe_0acc8c_idx'),
        ),
        migrations.AddIndex(
            model_name='employeetransferhistory',
            index=models.Index(fields=['from_pharmacie'], name='hr_employee_from_ph_64b8a7_idx'),
        ),
        migrations.AddIndex(
            model_name='employeetransferhistory',
            index=models.Index(fields=['to_pharmacie'], name='hr_employee_to_phar_39486e_idx'),
        ),
        migrations.AddIndex(
            model_name='leaverequest',
            index=models.Index(fields=['employee', 'status'], name='hr_leave_re_employe_8e5342_idx'),
        ),
        migrations.AddIndex(
            model_name='leaverequest',
            index=models.Index(fields=['start_date', 'end_date'], name='hr_leave_re_start_d_b9facf_idx'),
        ),
        migrations.AddIndex(
            model_name='leaverequest',
            index=models.Index(fields=['status', '-created_at'], name='hr_leave_re_status_193510_idx'),
        ),
        migrations.AddIndex(
            model_name='performancemetrics',
            index=models.Index(fields=['employee', '-period_end'], name='performance_employe_f68979_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='performancemetrics',
            unique_together={('employee', 'period_start', 'period_end')},
        ),
        migrations.AddIndex(
            model_name='performancereview',
            index=models.Index(fields=['employee', '-review_date'], name='performance_employe_628c01_idx'),
        ),
        migrations.AddIndex(
            model_name='replacementrequest',
            index=models.Index(fields=['requesting_employee', 'status'], name='hr_replacem_request_b77729_idx'),
        ),
        migrations.AddIndex(
            model_name='replacementrequest',
            index=models.Index(fields=['replacement_employee', 'status'], name='hr_replacem_replace_2b2d42_idx'),
        ),
        migrations.AddIndex(
            model_name='replacementrequest',
            index=models.Index(fields=['date'], name='hr_replacem_date_565213_idx'),
        ),
        migrations.AddIndex(
            model_name='role',
            index=models.Index(fields=['pharmacie', 'is_default'], name='hr_roles_pharmac_979d60_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='role',
            unique_together={('name', 'pharmacie')},
        ),
        migrations.AddIndex(
            model_name='promotion',
            index=models.Index(fields=['employee', '-promotion_date'], name='promotions_employe_31c742_idx'),
        ),
        migrations.AddIndex(
            model_name='employee',
            index=models.Index(fields=['pharmacie', 'employment_status'], name='hr_employee_pharmac_8e8148_idx'),
        ),
        migrations.AddIndex(
            model_name='employee',
            index=models.Index(fields=['employee_id'], name='hr_employee_employe_07cf6d_idx'),
        ),
        migrations.AddIndex(
            model_name='employee',
            index=models.Index(fields=['role'], name='hr_employee_role_id_396726_idx'),
        ),
        migrations.AddIndex(
            model_name='timeentry',
            index=models.Index(fields=['employee', '-timestamp'], name='time_entrie_employe_db4b19_idx'),
        ),
        migrations.AddIndex(
            model_name='timeentry',
            index=models.Index(fields=['timestamp'], name='time_entrie_timesta_de1b5e_idx'),
        ),
        migrations.AddIndex(
            model_name='timeentry',
            index=models.Index(fields=['entry_type', 'employee'], name='time_entrie_entry_t_950cc1_idx'),
        ),
        migrations.AddIndex(
            model_name='training',
            index=models.Index(fields=['employee', 'status'], name='trainings_employe_46253f_idx'),
        ),
        migrations.AddIndex(
            model_name='training',
            index=models.Index(fields=['start_date', 'end_date'], name='trainings_start_d_d6dc27_idx'),
        ),
        migrations.AddIndex(
            model_name='warning',
            index=models.Index(fields=['employee', '-date_issued'], name='warnings_employe_3f9b62_idx'),
        ),
        migrations.AddIndex(
            model_name='warning',
            index=models.Index(fields=['severity'], name='warnings_severit_eae9b9_idx'),
        ),
        migrations.AddIndex(
            model_name='workschedule',
            index=models.Index(fields=['employee', 'date'], name='hr_work_sch_employe_310a06_idx'),
        ),
        migrations.AddIndex(
            model_name='workschedule',
            index=models.Index(fields=['date', 'shift_type'], name='hr_work_sch_date_6f796d_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='workschedule',
            unique_together={('employee', 'date', 'start_time')},
        ),
        migrations.AddIndex(
            model_name='worksession',
            index=models.Index(fields=['employee', '-date'], name='work_sessio_employe_901468_idx'),
        ),
        migrations.AddIndex(
            model_name='worksession',
            index=models.Index(fields=['date'], name='work_sessio_date_fd09f3_idx'),
        ),
        migrations.AddIndex(
            model_name='worksession',
            index=models.Index(fields=['is_late'], name='work_sessio_is_late_26346b_idx'),
        ),
    ]
