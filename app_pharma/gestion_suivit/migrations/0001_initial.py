# Generated by Django 6.0 on 2026-01-14 15:56

import django.core.validators
import django.db.models.deletion
import django.utils.timezone
import uuid
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('gestion_compte', '0002_profilutilisateur'),
        ('gestion_rh', '0001_initial'),
        ('gestion_vente', '0002_cashregister_cashcount_cashtransaction_and_more'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Allergen',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=255, unique=True, verbose_name='Nom')),
                ('allergen_type', models.CharField(choices=[('medication', 'Médicament'), ('food', 'Aliment'), ('environment', 'Environnemental'), ('animal', 'Animal'), ('insect', 'Insecte'), ('chemical', 'Chimique'), ('other', 'Autre')], max_length=20, verbose_name="Type d'allergène")),
                ('active_substance', models.CharField(blank=True, help_text='Substance active si médicament', max_length=255, verbose_name='Substance active')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('common_reactions', models.TextField(blank=True, help_text='Réactions courantes', verbose_name='Réactions courantes')),
                ('is_active', models.BooleanField(default=True, verbose_name='Actif')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Allergène',
                'verbose_name_plural': 'Allergènes',
                'db_table': 'medical_allergens',
                'ordering': ['name'],
                'indexes': [models.Index(fields=['allergen_type'], name='medical_all_allerge_728b66_idx')],
            },
        ),
        migrations.CreateModel(
            name='Appointment',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('appointment_type', models.CharField(choices=[('consultation', 'Consultation pharmaceutique'), ('medication_review', 'Revue de médication'), ('vaccination', 'Vaccination'), ('blood_pressure', 'Prise de tension'), ('blood_sugar', 'Glycémie'), ('advice', 'Conseil pharmaceutique'), ('other', 'Autre')], max_length=30, verbose_name='Type de rendez-vous')),
                ('reason', models.TextField(blank=True, verbose_name='Motif')),
                ('appointment_datetime', models.DateTimeField(verbose_name='Date et heure')),
                ('duration_minutes', models.IntegerField(default=30, validators=[django.core.validators.MinValueValidator(5), django.core.validators.MaxValueValidator(180)], verbose_name='Durée (minutes)')),
                ('status', models.CharField(choices=[('scheduled', 'Planifié'), ('confirmed', 'Confirmé'), ('completed', 'Effectué'), ('cancelled', 'Annulé'), ('no_show', 'Absent'), ('rescheduled', 'Reporté')], default='scheduled', max_length=20, verbose_name='Statut')),
                ('reminder_sent', models.BooleanField(default=False, verbose_name='Rappel envoyé')),
                ('reminder_sent_at', models.DateTimeField(blank=True, null=True, verbose_name='Rappel envoyé le')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('completion_notes', models.TextField(blank=True, help_text='Notes après le rendez-vous', verbose_name='Notes de clôture')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='appointments_created', to=settings.AUTH_USER_MODEL, verbose_name='Créé par')),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='appointments', to='gestion_rh.client', verbose_name='Patient')),
                ('pharmacie', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='appointments', to='gestion_compte.pharmacie', verbose_name='Pharmacie')),
                ('pharmacist', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='appointments_assigned', to=settings.AUTH_USER_MODEL, verbose_name='Pharmacien')),
            ],
            options={
                'verbose_name': 'Rendez-vous',
                'verbose_name_plural': 'Rendez-vous',
                'db_table': 'medical_appointments',
                'ordering': ['-appointment_datetime'],
            },
        ),
        migrations.CreateModel(
            name='Doctor',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('doctor_code', models.CharField(max_length=50, unique=True, verbose_name='Code médecin')),
                ('first_name', models.CharField(max_length=100, verbose_name='Prénom')),
                ('last_name', models.CharField(max_length=100, verbose_name='Nom')),
                ('title', models.CharField(choices=[('Dr', 'Dr'), ('Pr', 'Pr')], default='Dr', max_length=10, verbose_name='Titre')),
                ('speciality', models.CharField(choices=[('general_practitioner', 'Médecin généraliste'), ('cardiologist', 'Cardiologue'), ('dermatologist', 'Dermatologue'), ('endocrinologist', 'Endocrinologue'), ('gastroenterologist', 'Gastro-entérologue'), ('gynecologist', 'Gynécologue'), ('neurologist', 'Neurologue'), ('ophthalmologist', 'Ophtalmologue'), ('orthopedist', 'Orthopédiste'), ('otolaryngologist', 'ORL'), ('pediatrician', 'Pédiatre'), ('pneumologist', 'Pneumologue'), ('psychiatrist', 'Psychiatre'), ('urologist', 'Urologue'), ('other', 'Autre')], max_length=50, verbose_name='Spécialité')),
                ('phone', models.CharField(max_length=20, verbose_name='Téléphone')),
                ('mobile', models.CharField(blank=True, max_length=20, verbose_name='Mobile')),
                ('email', models.EmailField(blank=True, max_length=254, validators=[django.core.validators.EmailValidator()], verbose_name='Email')),
                ('address', models.TextField(blank=True, verbose_name='Adresse')),
                ('city', models.CharField(blank=True, max_length=100, verbose_name='Ville')),
                ('license_number', models.CharField(help_text="Numéro d'ordre du conseil", max_length=50, unique=True, verbose_name="N° d'ordre")),
                ('hospital', models.CharField(blank=True, max_length=255, verbose_name='Hôpital/Clinique')),
                ('is_active', models.BooleanField(default=True, verbose_name='Actif')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('pharmacie', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='doctors', to='gestion_compte.pharmacie', verbose_name='Pharmacie')),
            ],
            options={
                'verbose_name': 'Médecin',
                'verbose_name_plural': 'Médecins',
                'db_table': 'medical_doctors',
                'ordering': ['last_name', 'first_name'],
            },
        ),
        migrations.CreateModel(
            name='DoctorPatientLink',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('is_primary', models.BooleanField(default=False, verbose_name='Médecin traitant')),
                ('relation_type', models.CharField(choices=[('regular', 'Suivi régulier'), ('consultation', 'Consultation ponctuelle'), ('specialist', 'Spécialiste')], default='regular', max_length=50, verbose_name='Type de relation')),
                ('start_date', models.DateField(default=django.utils.timezone.now, verbose_name='Date début suivi')),
                ('end_date', models.DateField(blank=True, null=True, verbose_name='Date fin suivi')),
                ('is_active', models.BooleanField(default=True, verbose_name='Actif')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('doctor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='patient_links', to='gestion_suivit.doctor', verbose_name='Médecin')),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='doctor_links', to='gestion_rh.client', verbose_name='Patient')),
            ],
            options={
                'verbose_name': 'Lien médecin-patient',
                'verbose_name_plural': 'Liens médecins-patients',
                'db_table': 'medical_doctor_patient_links',
                'ordering': ['-is_primary', '-start_date'],
            },
        ),
        migrations.CreateModel(
            name='ExternalMedicalRecord',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('external_id', models.CharField(blank=True, help_text='ID dans le système externe', max_length=100, verbose_name='ID externe')),
                ('record_type', models.CharField(choices=[('consultation', 'Compte-rendu consultation'), ('lab_result', "Résultat d'analyse"), ('imaging', 'Imagerie médicale'), ('surgery', 'Compte-rendu opération'), ('hospitalization', "Dossier d'hospitalisation"), ('vaccination', 'Carnet de vaccination'), ('other', 'Autre')], max_length=20, verbose_name='Type de dossier')),
                ('source_system', models.CharField(choices=[('hospital', 'Hôpital'), ('clinic', 'Clinique'), ('laboratory', 'Laboratoire'), ('imaging_center', "Centre d'imagerie"), ('specialist', 'Médecin spécialiste'), ('other', 'Autre')], max_length=20, verbose_name='Système source')),
                ('source_name', models.CharField(help_text="Nom de l'établissement source", max_length=255, verbose_name='Établissement source')),
                ('title', models.CharField(max_length=255, verbose_name='Titre')),
                ('content', models.TextField(blank=True, help_text='Contenu du document importé', verbose_name='Contenu')),
                ('document_file', models.FileField(blank=True, null=True, upload_to='external_records/%Y/%m/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf', 'jpg', 'jpeg', 'png', 'dcm'])], verbose_name='Fichier document')),
                ('record_date', models.DateField(help_text='Date du document médical', verbose_name='Date du document')),
                ('import_date', models.DateTimeField(auto_now_add=True, verbose_name="Date d'import")),
                ('fhir_resource_type', models.CharField(blank=True, help_text='Type de ressource FHIR', max_length=50, verbose_name='Type ressource FHIR')),
                ('fhir_resource_id', models.CharField(blank=True, max_length=100, verbose_name='ID ressource FHIR')),
                ('is_verified', models.BooleanField(default=False, help_text='Vérifié par un professionnel de santé', verbose_name='Vérifié')),
                ('verified_at', models.DateTimeField(blank=True, null=True, verbose_name='Vérifié le')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('doctor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='external_records', to='gestion_suivit.doctor', verbose_name='Médecin')),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='external_records', to='gestion_rh.client', verbose_name='Patient')),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='records_verified', to=settings.AUTH_USER_MODEL, verbose_name='Vérifié par')),
            ],
            options={
                'verbose_name': 'Dossier médical externe',
                'verbose_name_plural': 'Dossiers médicaux externes',
                'db_table': 'medical_external_records',
                'ordering': ['-record_date'],
            },
        ),
        migrations.CreateModel(
            name='Lead',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('first_name', models.CharField(max_length=100, verbose_name='Prénom')),
                ('last_name', models.CharField(max_length=100, verbose_name='Nom')),
                ('email', models.EmailField(blank=True, max_length=254, verbose_name='Email')),
                ('phone', models.CharField(blank=True, max_length=20, verbose_name='Téléphone')),
                ('source', models.CharField(choices=[('website', 'Site web'), ('social_media', 'Réseaux sociaux'), ('referral', 'Recommandation'), ('walk_in', 'Visite en pharmacie'), ('phone', 'Téléphone'), ('email', 'Email'), ('event', 'Événement'), ('other', 'Autre')], max_length=20, verbose_name='Source')),
                ('source_details', models.TextField(blank=True, verbose_name='Détails source')),
                ('interest_area', models.CharField(blank=True, max_length=255, verbose_name="Domaine d'intérêt")),
                ('status', models.CharField(choices=[('new', 'Nouveau'), ('contacted', 'Contacté'), ('qualified', 'Qualifié'), ('converted', 'Converti'), ('lost', 'Perdu')], default='new', max_length=20, verbose_name='Statut')),
                ('converted_at', models.DateTimeField(blank=True, null=True, verbose_name='Converti le')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='leads_assigned', to=settings.AUTH_USER_MODEL, verbose_name='Assigné à')),
                ('converted_to_customer', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lead_source', to='gestion_rh.client', verbose_name='Converti en client')),
                ('pharmacie', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='leads', to='gestion_compte.pharmacie', verbose_name='Pharmacie')),
            ],
            options={
                'verbose_name': 'Lead',
                'verbose_name_plural': 'Leads',
                'db_table': 'crm_leads',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='LoyaltyProgram',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=255, verbose_name='Nom du programme')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('points_per_xaf', models.DecimalField(decimal_places=2, default=Decimal('1.00'), help_text='Points gagnés pour chaque XAF dépensé', max_digits=10, verbose_name='Points par XAF')),
                ('points_expiry_months', models.IntegerField(default=12, help_text='Durée de validité des points en mois', verbose_name='Validité points (mois)')),
                ('min_points_redemption', models.IntegerField(default=100, help_text='Nombre minimum de points pour utiliser', verbose_name='Points min. utilisation')),
                ('xaf_per_point', models.DecimalField(decimal_places=2, default=Decimal('1.00'), help_text='Valeur en XAF de chaque point', max_digits=10, verbose_name='XAF par point')),
                ('birthday_bonus_points', models.IntegerField(default=0, verbose_name='Bonus anniversaire')),
                ('referral_bonus_points', models.IntegerField(default=0, verbose_name='Bonus parrainage')),
                ('enable_tiers', models.BooleanField(default=False, help_text='Activer les niveaux de fidélité', verbose_name='Activer niveaux')),
                ('is_active', models.BooleanField(default=True, verbose_name='Actif')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('pharmacie', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='loyalty_program', to='gestion_compte.pharmacie', verbose_name='Pharmacie')),
            ],
            options={
                'verbose_name': 'Programme de fidélité',
                'verbose_name_plural': 'Programmes de fidélité',
                'db_table': 'crm_loyalty_programs',
            },
        ),
        migrations.CreateModel(
            name='LoyaltyTier',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100, verbose_name='Nom du niveau')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('min_points', models.IntegerField(default=0, help_text='Points minimum requis', verbose_name='Points minimum')),
                ('min_purchases', models.IntegerField(default=0, help_text="Nombre d'achats minimum", verbose_name='Achats minimum')),
                ('min_amount_spent', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Montant dépensé minimum', max_digits=12, verbose_name='Montant minimum')),
                ('points_multiplier', models.DecimalField(decimal_places=2, default=Decimal('1.00'), help_text='Multiplicateur de points', max_digits=5, verbose_name='Multiplicateur points')),
                ('discount_percentage', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Remise %')),
                ('level', models.IntegerField(default=1, help_text='Ordre du niveau (1=Bronze, 2=Silver, 3=Gold)', verbose_name='Niveau')),
                ('color', models.CharField(default='#6c757d', help_text='Couleur hexadécimale', max_length=7, verbose_name='Couleur')),
                ('is_active', models.BooleanField(default=True, verbose_name='Actif')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('program', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='tiers', to='gestion_suivit.loyaltyprogram', verbose_name='Programme')),
            ],
            options={
                'verbose_name': 'Niveau de fidélité',
                'verbose_name_plural': 'Niveaux de fidélité',
                'db_table': 'crm_loyalty_tiers',
                'ordering': ['level'],
            },
        ),
        migrations.CreateModel(
            name='CustomerSegment',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=255, verbose_name='Nom du segment')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('age_min', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(150)], verbose_name='Âge minimum')),
                ('age_max', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(150)], verbose_name='Âge maximum')),
                ('gender', models.CharField(blank=True, choices=[('M', 'Homme'), ('F', 'Femme')], max_length=10, verbose_name='Sexe')),
                ('min_purchases', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(0)], verbose_name='Achats minimum')),
                ('min_amount_spent', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Montant dépensé minimum')),
                ('days_since_last_purchase', models.IntegerField(blank=True, help_text='Jours depuis dernier achat', null=True, verbose_name='Jours depuis dernier achat')),
                ('city', models.CharField(blank=True, max_length=100, verbose_name='Ville')),
                ('is_dynamic', models.BooleanField(default=True, help_text='Recalculer automatiquement les membres', verbose_name='Dynamique')),
                ('customer_count', models.IntegerField(default=0, verbose_name='Nombre de clients')),
                ('last_calculated_at', models.DateTimeField(blank=True, null=True, verbose_name='Dernière MAJ')),
                ('is_active', models.BooleanField(default=True, verbose_name='Actif')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('pharmacie', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='customer_segments', to='gestion_compte.pharmacie', verbose_name='Pharmacie')),
                ('loyalty_tier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='segments', to='gestion_suivit.loyaltytier', verbose_name='Niveau fidélité')),
            ],
            options={
                'verbose_name': 'Segment client',
                'verbose_name_plural': 'Segments clients',
                'db_table': 'crm_customer_segments',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='CustomerLoyalty',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('total_points_earned', models.IntegerField(default=0, verbose_name='Total points gagnés')),
                ('points_balance', models.IntegerField(default=0, verbose_name='Solde points')),
                ('points_used', models.IntegerField(default=0, verbose_name='Points utilisés')),
                ('points_expired', models.IntegerField(default=0, verbose_name='Points expirés')),
                ('total_purchases', models.IntegerField(default=0, verbose_name='Total achats')),
                ('total_amount_spent', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12, verbose_name='Total dépensé')),
                ('enrolled_date', models.DateField(default=django.utils.timezone.now, verbose_name="Date d'inscription")),
                ('last_activity_date', models.DateField(blank=True, null=True, verbose_name='Dernière activité')),
                ('is_active', models.BooleanField(default=True, verbose_name='Actif')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('customer', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='loyalty_account', to='gestion_rh.client', verbose_name='Client')),
                ('program', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='customer_accounts', to='gestion_suivit.loyaltyprogram', verbose_name='Programme')),
                ('current_tier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='customers', to='gestion_suivit.loyaltytier', verbose_name='Niveau actuel')),
            ],
            options={
                'verbose_name': 'Compte fidélité client',
                'verbose_name_plural': 'Comptes fidélité clients',
                'db_table': 'crm_customer_loyalty',
            },
        ),
        migrations.CreateModel(
            name='LoyaltyTransaction',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('transaction_type', models.CharField(choices=[('earn', 'Gain de points'), ('redeem', 'Utilisation de points'), ('expire', 'Expiration de points'), ('bonus', 'Bonus'), ('adjustment', 'Ajustement'), ('refund', 'Remboursement')], max_length=20, verbose_name='Type de transaction')),
                ('points', models.IntegerField(help_text='Positif pour gains, négatif pour utilisation', verbose_name='Points')),
                ('description', models.CharField(max_length=255, verbose_name='Description')),
                ('expires_at', models.DateField(blank=True, null=True, verbose_name='Expire le')),
                ('transaction_date', models.DateTimeField(default=django.utils.timezone.now, verbose_name='Date transaction')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('customer_loyalty', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transactions', to='gestion_suivit.customerloyalty', verbose_name='Compte fidélité')),
                ('sale', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='loyalty_transactions', to='gestion_vente.sale', verbose_name='Vente')),
            ],
            options={
                'verbose_name': 'Transaction fidélité',
                'verbose_name_plural': 'Transactions fidélité',
                'db_table': 'crm_loyalty_transactions',
                'ordering': ['-transaction_date'],
            },
        ),
        migrations.CreateModel(
            name='MarketingCampaign',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=255, verbose_name='Nom de la campagne')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('campaign_type', models.CharField(choices=[('email', 'Email'), ('sms', 'SMS'), ('push', 'Notification push'), ('social', 'Réseaux sociaux'), ('mixed', 'Mixte')], max_length=20, verbose_name='Type de campagne')),
                ('subject', models.CharField(blank=True, help_text='Sujet email ou titre SMS', max_length=255, verbose_name='Sujet')),
                ('message_body', models.TextField(help_text='Corps du message', verbose_name='Message')),
                ('target_segment', models.CharField(blank=True, help_text='Segment ciblé', max_length=100, verbose_name='Segment cible')),
                ('scheduled_datetime', models.DateTimeField(blank=True, null=True, verbose_name="Date d'envoi prévue")),
                ('start_datetime', models.DateTimeField(blank=True, null=True, verbose_name='Date de début')),
                ('end_datetime', models.DateTimeField(blank=True, null=True, verbose_name='Date de fin')),
                ('status', models.CharField(choices=[('draft', 'Brouillon'), ('scheduled', 'Planifiée'), ('running', 'En cours'), ('completed', 'Terminée'), ('paused', 'En pause'), ('cancelled', 'Annulée')], default='draft', max_length=20, verbose_name='Statut')),
                ('total_recipients', models.IntegerField(default=0, verbose_name='Destinataires')),
                ('total_sent', models.IntegerField(default=0, verbose_name='Envoyés')),
                ('total_delivered', models.IntegerField(default=0, verbose_name='Délivrés')),
                ('total_opened', models.IntegerField(default=0, verbose_name='Ouverts')),
                ('total_clicked', models.IntegerField(default=0, verbose_name='Cliqués')),
                ('total_conversions', models.IntegerField(default=0, verbose_name='Conversions')),
                ('campaign_cost', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12, verbose_name='Coût campagne')),
                ('revenue_generated', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12, verbose_name='Revenus générés')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='campaigns_created', to=settings.AUTH_USER_MODEL, verbose_name='Créé par')),
                ('pharmacie', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='marketing_campaigns', to='gestion_compte.pharmacie', verbose_name='Pharmacie')),
            ],
            options={
                'verbose_name': 'Campagne marketing',
                'verbose_name_plural': 'Campagnes marketing',
                'db_table': 'crm_marketing_campaigns',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='CampaignRecipient',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('status', models.CharField(choices=[('pending', 'En attente'), ('sent', 'Envoyé'), ('delivered', 'Délivré'), ('opened', 'Ouvert'), ('clicked', 'Cliqué'), ('converted', 'Converti'), ('bounced', 'Rejeté'), ('unsubscribed', 'Désinscrit')], default='pending', max_length=20, verbose_name='Statut')),
                ('sent_at', models.DateTimeField(blank=True, null=True, verbose_name='Envoyé le')),
                ('delivered_at', models.DateTimeField(blank=True, null=True, verbose_name='Délivré le')),
                ('opened_at', models.DateTimeField(blank=True, null=True, verbose_name='Ouvert le')),
                ('clicked_at', models.DateTimeField(blank=True, null=True, verbose_name='Cliqué le')),
                ('converted', models.BooleanField(default=False, verbose_name='Converti')),
                ('conversion_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12, verbose_name='Montant conversion')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('customer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='campaign_receipts', to='gestion_rh.client', verbose_name='Client')),
                ('campaign', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='recipients', to='gestion_suivit.marketingcampaign', verbose_name='Campagne')),
            ],
            options={
                'verbose_name': 'Destinataire campagne',
                'verbose_name_plural': 'Destinataires campagnes',
                'db_table': 'crm_campaign_recipients',
                'ordering': ['created_at'],
            },
        ),
        migrations.CreateModel(
            name='MedicalCondition',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('code', models.CharField(help_text='Code CIM-10 ou code interne', max_length=20, unique=True, verbose_name='Code')),
                ('name', models.CharField(max_length=255, verbose_name='Nom')),
                ('condition_type', models.CharField(choices=[('chronic', 'Maladie chronique'), ('acute', 'Maladie aiguë'), ('genetic', 'Maladie génétique'), ('infectious', 'Maladie infectieuse'), ('autoimmune', 'Maladie auto-immune'), ('mental', 'Trouble mental'), ('other', 'Autre')], max_length=20, verbose_name='Type de pathologie')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('symptoms', models.TextField(blank=True, help_text='Symptômes typiques', verbose_name='Symptômes')),
                ('category', models.CharField(blank=True, help_text='Ex: Cardiovasculaire, Respiratoire, etc.', max_length=100, verbose_name='Catégorie')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Pathologie',
                'verbose_name_plural': 'Pathologies',
                'db_table': 'medical_conditions',
                'ordering': ['name'],
                'indexes': [models.Index(fields=['code'], name='medical_con_code_379869_idx'), models.Index(fields=['condition_type'], name='medical_con_conditi_b5937f_idx'), models.Index(fields=['category'], name='medical_con_categor_e50ab0_idx')],
            },
        ),
        migrations.CreateModel(
            name='MedicalProfile',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('blood_type', models.CharField(choices=[('A+', 'A+'), ('A-', 'A-'), ('B+', 'B+'), ('B-', 'B-'), ('AB+', 'AB+'), ('AB-', 'AB-'), ('O+', 'O+'), ('O-', 'O-'), ('unknown', 'Non renseigné')], default='unknown', max_length=10, verbose_name='Groupe sanguin')),
                ('height', models.DecimalField(blank=True, decimal_places=2, help_text='Taille en cm', max_digits=5, null=True, verbose_name='Taille (cm)')),
                ('weight', models.DecimalField(blank=True, decimal_places=2, help_text='Poids en kg', max_digits=5, null=True, verbose_name='Poids (kg)')),
                ('emergency_contact_name', models.CharField(blank=True, max_length=255, verbose_name="Nom contact d'urgence")),
                ('emergency_contact_phone', models.CharField(blank=True, max_length=20, verbose_name="Téléphone contact d'urgence")),
                ('emergency_contact_relation', models.CharField(blank=True, max_length=50, verbose_name="Lien avec contact d'urgence")),
                ('insurance_provider', models.CharField(blank=True, max_length=255, verbose_name='Assureur')),
                ('insurance_number', models.CharField(blank=True, max_length=100, verbose_name="Numéro d'assurance")),
                ('consent_data_usage', models.BooleanField(default=False, help_text="Consentement pour l'utilisation des données médicales", verbose_name='Consentement données')),
                ('consent_communication', models.BooleanField(default=False, help_text='Consentement pour recevoir des communications', verbose_name='Consentement communication')),
                ('medical_notes', models.TextField(blank=True, verbose_name='Notes médicales')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('last_checkup_date', models.DateField(blank=True, null=True, verbose_name='Dernière consultation')),
                ('patient', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='medical_profile', to='gestion_rh.client', verbose_name='Patient')),
                ('primary_doctor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='primary_patients', to='gestion_suivit.doctor', verbose_name='Médecin traitant')),
            ],
            options={
                'verbose_name': 'Profil médical',
                'verbose_name_plural': 'Profils médicaux',
                'db_table': 'medical_profiles',
            },
        ),
        migrations.CreateModel(
            name='PatientAllergy',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('severity', models.CharField(choices=[('mild', 'Léger'), ('moderate', 'Modéré'), ('severe', 'Sévère'), ('life_threatening', 'Potentiellement mortel')], default='moderate', max_length=20, verbose_name='Sévérité')),
                ('reaction_type', models.CharField(choices=[('rash', 'Éruption cutanée'), ('hives', 'Urticaire'), ('itching', 'Démangeaisons'), ('swelling', 'Gonflement'), ('breathing_difficulty', 'Difficulté respiratoire'), ('anaphylaxis', 'Anaphylaxie'), ('nausea', 'Nausées'), ('vomiting', 'Vomissements'), ('diarrhea', 'Diarrhée'), ('other', 'Autre')], max_length=30, verbose_name='Type de réaction')),
                ('symptoms', models.TextField(blank=True, help_text='Symptômes observés', verbose_name='Symptômes')),
                ('first_occurrence_date', models.DateField(blank=True, null=True, verbose_name='Date première occurrence')),
                ('last_occurrence_date', models.DateField(blank=True, null=True, verbose_name='Date dernière occurrence')),
                ('is_active', models.BooleanField(default=True, help_text='Allergie toujours active', verbose_name='Active')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('emergency_instructions', models.TextField(blank=True, help_text="Instructions en cas d'urgence", verbose_name="Instructions d'urgence")),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('allergen', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='patient_cases', to='gestion_suivit.allergen', verbose_name='Allergène')),
                ('diagnosed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='allergy_diagnoses', to='gestion_suivit.doctor', verbose_name='Diagnostiqué par')),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='patient_allergies', to='gestion_rh.client', verbose_name='Patient')),
            ],
            options={
                'verbose_name': 'Allergie patient',
                'verbose_name_plural': 'Allergies patients',
                'db_table': 'medical_patient_allergies',
                'ordering': ['-severity', 'allergen__name'],
            },
        ),
        migrations.CreateModel(
            name='PatientCondition',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('diagnosis_date', models.DateField(default=django.utils.timezone.now, verbose_name='Date de diagnostic')),
                ('resolved_date', models.DateField(blank=True, null=True, verbose_name='Date de résolution')),
                ('severity', models.CharField(choices=[('mild', 'Léger'), ('moderate', 'Modéré'), ('severe', 'Sévère'), ('critical', 'Critique')], default='moderate', max_length=20, verbose_name='Sévérité')),
                ('status', models.CharField(choices=[('active', 'Active'), ('in_remission', 'En rémission'), ('resolved', 'Résolue'), ('chronic', 'Chronique')], default='active', max_length=20, verbose_name='Statut')),
                ('notes', models.TextField(blank=True, help_text="Notes sur l'évolution, traitement, etc.", verbose_name='Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('condition', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='patient_cases', to='gestion_suivit.medicalcondition', verbose_name='Pathologie')),
                ('diagnosed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='diagnoses', to='gestion_suivit.doctor', verbose_name='Diagnostiqué par')),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='conditions', to='gestion_rh.client', verbose_name='Patient')),
            ],
            options={
                'verbose_name': 'Pathologie patient',
                'verbose_name_plural': 'Pathologies patients',
                'db_table': 'medical_patient_conditions',
                'ordering': ['-diagnosis_date'],
            },
        ),
        migrations.CreateModel(
            name='PatientMessage',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('message_type', models.CharField(choices=[('question', 'Question'), ('complaint', 'Réclamation'), ('feedback', 'Avis/Suggestion'), ('appointment_request', 'Demande RDV'), ('renewal_request', 'Demande renouvellement'), ('other', 'Autre')], max_length=30, verbose_name='Type de message')),
                ('subject', models.CharField(max_length=255, verbose_name='Sujet')),
                ('message', models.TextField(verbose_name='Message')),
                ('priority', models.CharField(choices=[('low', 'Basse'), ('normal', 'Normale'), ('high', 'Haute'), ('urgent', 'Urgente')], default='normal', max_length=20, verbose_name='Priorité')),
                ('status', models.CharField(choices=[('new', 'Nouveau'), ('in_progress', 'En cours'), ('answered', 'Répondu'), ('closed', 'Clôturé')], default='new', max_length=20, verbose_name='Statut')),
                ('response', models.TextField(blank=True, verbose_name='Réponse')),
                ('responded_at', models.DateTimeField(blank=True, null=True, verbose_name='Répondu le')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='patient_messages_assigned', to=settings.AUTH_USER_MODEL, verbose_name='Assigné à')),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='messages', to='gestion_rh.client', verbose_name='Patient')),
                ('pharmacie', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='patient_messages', to='gestion_compte.pharmacie', verbose_name='Pharmacie')),
                ('responded_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='patient_messages_responded', to=settings.AUTH_USER_MODEL, verbose_name='Répondu par')),
            ],
            options={
                'verbose_name': 'Message patient',
                'verbose_name_plural': 'Messages patients',
                'db_table': 'medical_patient_messages',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Prescription',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('prescription_number', models.CharField(max_length=50, unique=True, verbose_name="Numéro d'ordonnance")),
                ('prescription_date', models.DateField(default=django.utils.timezone.now, verbose_name='Date de prescription')),
                ('expiry_date', models.DateField(blank=True, help_text="Date d'expiration de l'ordonnance", null=True, verbose_name="Date d'expiration")),
                ('diagnosis', models.TextField(blank=True, verbose_name='Diagnostic')),
                ('status', models.CharField(choices=[('active', 'Active'), ('completed', 'Terminée'), ('cancelled', 'Annulée'), ('expired', 'Expirée')], default='active', max_length=20, verbose_name='Statut')),
                ('is_renewable', models.BooleanField(default=False, verbose_name='Renouvelable')),
                ('renewal_count', models.IntegerField(default=0, help_text='Nombre de renouvellements autorisés', verbose_name='Nombre de renouvellements')),
                ('renewals_remaining', models.IntegerField(default=0, verbose_name='Renouvellements restants')),
                ('prescription_file', models.FileField(blank=True, null=True, upload_to='prescriptions/%Y/%m/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf', 'jpg', 'jpeg', 'png'])], verbose_name='Fichier ordonnance')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('pharmacist_notes', models.TextField(blank=True, verbose_name='Notes pharmacien')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('dispensed_at', models.DateTimeField(blank=True, null=True, verbose_name='Délivrée le')),
                ('dispensed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='prescriptions_dispensed', to=settings.AUTH_USER_MODEL, verbose_name='Délivrée par')),
                ('doctor', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='prescriptions', to='gestion_suivit.doctor', verbose_name='Médecin prescripteur')),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='prescriptions', to='gestion_rh.client', verbose_name='Patient')),
            ],
            options={
                'verbose_name': 'Ordonnance',
                'verbose_name_plural': 'Ordonnances',
                'db_table': 'medical_prescriptions',
                'ordering': ['-prescription_date'],
            },
        ),
        migrations.CreateModel(
            name='PrescriptionItem',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('quantity', models.IntegerField(help_text="Nombre d'unités prescrites", validators=[django.core.validators.MinValueValidator(1)], verbose_name='Quantité')),
                ('dosage', models.CharField(help_text='Ex: 500mg, 10ml', max_length=100, verbose_name='Dosage')),
                ('frequency', models.CharField(help_text='Ex: 3 fois par jour, matin et soir', max_length=100, verbose_name='Fréquence')),
                ('duration', models.CharField(help_text='Ex: 7 jours, 1 mois', max_length=100, verbose_name='Durée')),
                ('instructions', models.TextField(blank=True, help_text='Instructions spécifiques (avant/après repas, etc.)', verbose_name='Instructions')),
                ('substitution_allowed', models.BooleanField(default=True, verbose_name='Substitution autorisée')),
                ('quantity_dispensed', models.IntegerField(default=0, validators=[django.core.validators.MinValueValidator(0)], verbose_name='Quantité délivrée')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('prescription', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='gestion_suivit.prescription', verbose_name='Ordonnance')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='prescription_items', to='gestion_vente.product', verbose_name='Médicament')),
            ],
            options={
                'verbose_name': "Ligne d'ordonnance",
                'verbose_name_plural': "Lignes d'ordonnances",
                'db_table': 'medical_prescription_items',
                'ordering': ['created_at'],
            },
        ),
        migrations.CreateModel(
            name='Treatment',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(help_text='Nom du traitement', max_length=255, verbose_name='Nom')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('start_date', models.DateField(default=django.utils.timezone.now, verbose_name='Date de début')),
                ('end_date', models.DateField(blank=True, null=True, verbose_name='Date de fin prévue')),
                ('actual_end_date', models.DateField(blank=True, null=True, verbose_name='Date de fin réelle')),
                ('status', models.CharField(choices=[('active', 'En cours'), ('completed', 'Terminé'), ('paused', 'Suspendu'), ('discontinued', 'Interrompu')], default='active', max_length=20, verbose_name='Statut')),
                ('reminder_enabled', models.BooleanField(default=False, verbose_name='Rappels activés')),
                ('reminder_frequency', models.CharField(blank=True, help_text='Ex: daily, twice_daily, weekly', max_length=50, verbose_name='Fréquence rappels')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('condition', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='treatments', to='gestion_suivit.patientcondition', verbose_name='Pathologie')),
                ('doctor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='treatments_supervised', to='gestion_suivit.doctor', verbose_name='Médecin superviseur')),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='treatments', to='gestion_rh.client', verbose_name='Patient')),
                ('prescription', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='treatments', to='gestion_suivit.prescription', verbose_name='Ordonnance source')),
            ],
            options={
                'verbose_name': 'Traitement',
                'verbose_name_plural': 'Traitements',
                'db_table': 'medical_treatments',
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='AutomatedReminder',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('reminder_type', models.CharField(choices=[('medication_renewal', 'Renouvellement traitement'), ('appointment', 'Rendez-vous'), ('medication_time', 'Prise de médicament'), ('birthday', 'Anniversaire'), ('inactive_customer', 'Client inactif'), ('loyalty_points', 'Points fidélité'), ('other', 'Autre')], max_length=30, verbose_name='Type de rappel')),
                ('message', models.TextField(verbose_name='Message')),
                ('send_via_sms', models.BooleanField(default=False, verbose_name='Envoyer par SMS')),
                ('send_via_email', models.BooleanField(default=False, verbose_name='Envoyer par Email')),
                ('send_via_push', models.BooleanField(default=False, verbose_name='Envoyer par Push')),
                ('scheduled_datetime', models.DateTimeField(verbose_name="Date d'envoi prévue")),
                ('status', models.CharField(choices=[('pending', 'En attente'), ('sent', 'Envoyé'), ('failed', 'Échoué'), ('cancelled', 'Annulé')], default='pending', max_length=20, verbose_name='Statut')),
                ('sent_at', models.DateTimeField(blank=True, null=True, verbose_name='Envoyé le')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('appointment', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reminders', to='gestion_suivit.appointment', verbose_name='Rendez-vous')),
                ('customer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reminders', to='gestion_rh.client', verbose_name='Client')),
                ('pharmacie', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='automated_reminders', to='gestion_compte.pharmacie', verbose_name='Pharmacie')),
                ('treatment', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reminders', to='gestion_suivit.treatment', verbose_name='Traitement')),
            ],
            options={
                'verbose_name': 'Rappel automatique',
                'verbose_name_plural': 'Rappels automatiques',
                'db_table': 'crm_automated_reminders',
                'ordering': ['scheduled_datetime'],
            },
        ),
        migrations.CreateModel(
            name='TreatmentMedication',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('dosage', models.CharField(max_length=100, verbose_name='Dosage')),
                ('frequency', models.CharField(max_length=100, verbose_name='Fréquence')),
                ('instructions', models.TextField(blank=True, verbose_name='Instructions')),
                ('start_date', models.DateField(default=django.utils.timezone.now, verbose_name='Date début')),
                ('end_date', models.DateField(blank=True, null=True, verbose_name='Date fin')),
                ('is_active', models.BooleanField(default=True, verbose_name='Actif')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='treatment_uses', to='gestion_vente.product', verbose_name='Médicament')),
                ('treatment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='medications', to='gestion_suivit.treatment', verbose_name='Traitement')),
            ],
            options={
                'verbose_name': 'Médicament traitement',
                'verbose_name_plural': 'Médicaments traitements',
                'db_table': 'medical_treatment_medications',
                'ordering': ['start_date'],
            },
        ),
        migrations.AddIndex(
            model_name='appointment',
            index=models.Index(fields=['pharmacie', 'appointment_datetime'], name='medical_app_pharmac_551b28_idx'),
        ),
        migrations.AddIndex(
            model_name='appointment',
            index=models.Index(fields=['patient', '-appointment_datetime'], name='medical_app_patient_f7c5bd_idx'),
        ),
        migrations.AddIndex(
            model_name='appointment',
            index=models.Index(fields=['pharmacist', 'appointment_datetime'], name='medical_app_pharmac_318fff_idx'),
        ),
        migrations.AddIndex(
            model_name='appointment',
            index=models.Index(fields=['status'], name='medical_app_status_c072cb_idx'),
        ),
        migrations.AddIndex(
            model_name='doctor',
            index=models.Index(fields=['pharmacie', 'speciality'], name='medical_doc_pharmac_5feec6_idx'),
        ),
        migrations.AddIndex(
            model_name='doctor',
            index=models.Index(fields=['license_number'], name='medical_doc_license_712266_idx'),
        ),
        migrations.AddIndex(
            model_name='doctor',
            index=models.Index(fields=['is_active'], name='medical_doc_is_acti_087b91_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='doctorpatientlink',
            unique_together={('patient', 'doctor')},
        ),
        migrations.AddIndex(
            model_name='externalmedicalrecord',
            index=models.Index(fields=['patient', '-record_date'], name='medical_ext_patient_45e07e_idx'),
        ),
        migrations.AddIndex(
            model_name='externalmedicalrecord',
            index=models.Index(fields=['record_type'], name='medical_ext_record__15b305_idx'),
        ),
        migrations.AddIndex(
            model_name='externalmedicalrecord',
            index=models.Index(fields=['external_id'], name='medical_ext_externa_2eeeb6_idx'),
        ),
        migrations.AddIndex(
            model_name='lead',
            index=models.Index(fields=['pharmacie', 'status'], name='crm_leads_pharmac_435309_idx'),
        ),
        migrations.AddIndex(
            model_name='lead',
            index=models.Index(fields=['assigned_to', 'status'], name='crm_leads_assigne_da8127_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='loyaltytier',
            unique_together={('program', 'level')},
        ),
        migrations.AddIndex(
            model_name='customersegment',
            index=models.Index(fields=['pharmacie', 'is_active'], name='crm_custome_pharmac_1473c3_idx'),
        ),
        migrations.AddIndex(
            model_name='customerloyalty',
            index=models.Index(fields=['customer'], name='crm_custome_custome_80ceb3_idx'),
        ),
        migrations.AddIndex(
            model_name='customerloyalty',
            index=models.Index(fields=['program', 'current_tier'], name='crm_custome_program_c31ce6_idx'),
        ),
        migrations.AddIndex(
            model_name='loyaltytransaction',
            index=models.Index(fields=['customer_loyalty', '-transaction_date'], name='crm_loyalty_custome_49cd78_idx'),
        ),
        migrations.AddIndex(
            model_name='marketingcampaign',
            index=models.Index(fields=['pharmacie', 'status'], name='crm_marketi_pharmac_efc114_idx'),
        ),
        migrations.AddIndex(
            model_name='marketingcampaign',
            index=models.Index(fields=['scheduled_datetime'], name='crm_marketi_schedul_cbbb15_idx'),
        ),
        migrations.AddIndex(
            model_name='campaignrecipient',
            index=models.Index(fields=['campaign', 'status'], name='crm_campaig_campaig_2ae5fc_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='campaignrecipient',
            unique_together={('campaign', 'customer')},
        ),
        migrations.AddIndex(
            model_name='medicalprofile',
            index=models.Index(fields=['patient'], name='medical_pro_patient_661d9b_idx'),
        ),
        migrations.AddIndex(
            model_name='patientallergy',
            index=models.Index(fields=['patient', 'is_active'], name='medical_pat_patient_52fb20_idx'),
        ),
        migrations.AddIndex(
            model_name='patientallergy',
            index=models.Index(fields=['severity'], name='medical_pat_severit_e3b2dc_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='patientallergy',
            unique_together={('patient', 'allergen')},
        ),
        migrations.AddIndex(
            model_name='patientcondition',
            index=models.Index(fields=['patient', 'status'], name='medical_pat_patient_a5a187_idx'),
        ),
        migrations.AddIndex(
            model_name='patientcondition',
            index=models.Index(fields=['condition', 'status'], name='medical_pat_conditi_5787c8_idx'),
        ),
        migrations.AddIndex(
            model_name='patientmessage',
            index=models.Index(fields=['pharmacie', 'status', '-created_at'], name='medical_pat_pharmac_a25850_idx'),
        ),
        migrations.AddIndex(
            model_name='patientmessage',
            index=models.Index(fields=['patient', '-created_at'], name='medical_pat_patient_a7b40e_idx'),
        ),
        migrations.AddIndex(
            model_name='patientmessage',
            index=models.Index(fields=['assigned_to', 'status'], name='medical_pat_assigne_aded01_idx'),
        ),
        migrations.AddIndex(
            model_name='prescription',
            index=models.Index(fields=['patient', '-prescription_date'], name='medical_pre_patient_d09e42_idx'),
        ),
        migrations.AddIndex(
            model_name='prescription',
            index=models.Index(fields=['doctor', '-prescription_date'], name='medical_pre_doctor__d97ea2_idx'),
        ),
        migrations.AddIndex(
            model_name='prescription',
            index=models.Index(fields=['prescription_number'], name='medical_pre_prescri_002637_idx'),
        ),
        migrations.AddIndex(
            model_name='prescription',
            index=models.Index(fields=['status'], name='medical_pre_status_fae8ff_idx'),
        ),
        migrations.AddIndex(
            model_name='treatment',
            index=models.Index(fields=['patient', 'status'], name='medical_tre_patient_664c72_idx'),
        ),
        migrations.AddIndex(
            model_name='treatment',
            index=models.Index(fields=['status', 'end_date'], name='medical_tre_status_e2d8c4_idx'),
        ),
        migrations.AddIndex(
            model_name='automatedreminder',
            index=models.Index(fields=['pharmacie', 'status', 'scheduled_datetime'], name='crm_automat_pharmac_d56e65_idx'),
        ),
        migrations.AddIndex(
            model_name='automatedreminder',
            index=models.Index(fields=['customer', 'scheduled_datetime'], name='crm_automat_custome_f25c0d_idx'),
        ),
    ]
