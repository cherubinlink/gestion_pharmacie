# Generated by Django 6.0 on 2026-01-14 15:56

import django.core.validators
import django.db.models.deletion
import uuid
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('gestion_compte', '0002_profilutilisateur'),
        ('gestion_rh', '0001_initial'),
        ('gestion_vente', '0002_cashregister_cashcount_cashtransaction_and_more'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='OnlineOrder',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('order_number', models.CharField(max_length=50, unique=True, verbose_name='Numéro de commande')),
                ('email', models.EmailField(max_length=254, verbose_name='Email')),
                ('phone', models.CharField(max_length=20, verbose_name='Téléphone')),
                ('status', models.CharField(choices=[('pending', 'En attente'), ('confirmed', 'Confirmée'), ('processing', 'En préparation'), ('ready', 'Prête'), ('shipped', 'Expédiée'), ('delivered', 'Livrée'), ('cancelled', 'Annulée'), ('refunded', 'Remboursée')], default='pending', max_length=20, verbose_name='Statut')),
                ('delivery_method', models.CharField(choices=[('delivery', 'Livraison à domicile'), ('pickup', 'Retrait en pharmacie')], max_length=20, verbose_name='Méthode de livraison')),
                ('delivery_address', models.TextField(blank=True, verbose_name='Adresse de livraison')),
                ('delivery_city', models.CharField(blank=True, max_length=100, verbose_name='Ville')),
                ('delivery_zone', models.CharField(blank=True, max_length=100, verbose_name='Zone/Quartier')),
                ('delivery_instructions', models.TextField(blank=True, verbose_name='Instructions de livraison')),
                ('payment_method', models.CharField(choices=[('cod', 'Paiement à la livraison'), ('mobile_money', 'Mobile Money'), ('card', 'Carte bancaire'), ('transfer', 'Virement bancaire')], max_length=20, verbose_name='Méthode de paiement')),
                ('payment_status', models.CharField(choices=[('pending', 'En attente'), ('paid', 'Payé'), ('failed', 'Échoué'), ('refunded', 'Remboursé')], default='pending', max_length=20, verbose_name='Statut paiement')),
                ('payment_reference', models.CharField(blank=True, max_length=255, verbose_name='Référence paiement')),
                ('paid_at', models.DateTimeField(blank=True, null=True, verbose_name='Payé le')),
                ('subtotal', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Sous-total')),
                ('delivery_fee', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10, verbose_name='Frais de livraison')),
                ('discount_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10, verbose_name='Montant de réduction')),
                ('total', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Total')),
                ('prescription_required', models.BooleanField(default=False, verbose_name='Ordonnance requise')),
                ('prescription_file', models.FileField(blank=True, null=True, upload_to='prescriptions/online/%Y/%m/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf', 'jpg', 'jpeg', 'png'])], verbose_name='Fichier ordonnance')),
                ('prescription_verified', models.BooleanField(default=False, verbose_name='Ordonnance vérifiée')),
                ('customer_notes', models.TextField(blank=True, verbose_name='Notes du client')),
                ('admin_notes', models.TextField(blank=True, verbose_name='Notes internes')),
                ('confirmed_at', models.DateTimeField(blank=True, null=True, verbose_name='Confirmée le')),
                ('shipped_at', models.DateTimeField(blank=True, null=True, verbose_name='Expédiée le')),
                ('delivered_at', models.DateTimeField(blank=True, null=True, verbose_name='Livrée le')),
                ('cancelled_at', models.DateTimeField(blank=True, null=True, verbose_name='Annulée le')),
                ('cancellation_reason', models.TextField(blank=True, verbose_name="Raison d'annulation")),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('confirmed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='orders_confirmed', to=settings.AUTH_USER_MODEL, verbose_name='Confirmée par')),
                ('customer', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='online_orders', to='gestion_rh.client', verbose_name='Client')),
                ('sale', models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='online_order', to='gestion_vente.sale', verbose_name='Vente')),
            ],
            options={
                'verbose_name': 'Commande en ligne',
                'verbose_name_plural': 'Commandes en ligne',
                'db_table': 'ecommerce_online_orders',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='OnlineProduct',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('online_price', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Prix en ligne')),
                ('is_on_sale', models.BooleanField(default=False, verbose_name='En promotion')),
                ('sale_price', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Prix promotionnel')),
                ('sale_start_date', models.DateTimeField(blank=True, null=True, verbose_name='Début promotion')),
                ('sale_end_date', models.DateTimeField(blank=True, null=True, verbose_name='Fin promotion')),
                ('online_stock_quantity', models.IntegerField(default=0, help_text='Stock disponible pour la vente en ligne', validators=[django.core.validators.MinValueValidator(0)], verbose_name='Stock en ligne')),
                ('max_quantity_per_order', models.IntegerField(default=10, validators=[django.core.validators.MinValueValidator(1)], verbose_name='Quantité max par commande')),
                ('is_visible', models.BooleanField(default=True, verbose_name='Visible sur le site')),
                ('is_featured', models.BooleanField(default=False, help_text='Produit vedette affiché en premier', verbose_name='Produit vedette')),
                ('is_new_arrival', models.BooleanField(default=False, verbose_name='Nouvelle arrivée')),
                ('primary_image', models.ImageField(blank=True, null=True, upload_to='products/online/%Y/%m/', verbose_name='Image principale')),
                ('online_description', models.TextField(blank=True, help_text='Description détaillée pour le site web', verbose_name='Description en ligne')),
                ('short_description', models.CharField(blank=True, max_length=255, verbose_name='Description courte')),
                ('usage_instructions', models.TextField(blank=True, verbose_name="Mode d'emploi")),
                ('warnings', models.TextField(blank=True, verbose_name='Avertissements')),
                ('storage_conditions', models.CharField(blank=True, max_length=255, verbose_name='Conditions de conservation')),
                ('requires_prescription', models.BooleanField(default=False, verbose_name='Ordonnance requise')),
                ('views_count', models.IntegerField(default=0, verbose_name='Nombre de vues')),
                ('sales_count', models.IntegerField(default=0, verbose_name='Nombre de ventes')),
                ('meta_title', models.CharField(blank=True, max_length=255, verbose_name='Meta titre')),
                ('meta_description', models.TextField(blank=True, verbose_name='Meta description')),
                ('available_from', models.DateTimeField(blank=True, null=True, verbose_name='Disponible à partir de')),
                ('available_until', models.DateTimeField(blank=True, null=True, verbose_name="Disponible jusqu'à")),
                ('display_order', models.IntegerField(default=0, verbose_name="Ordre d'affichage")),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='online_listings', to='gestion_vente.product', verbose_name='Produit')),
            ],
            options={
                'verbose_name': 'Produit en ligne',
                'verbose_name_plural': 'Produits en ligne',
                'db_table': 'ecommerce_online_products',
                'ordering': ['-is_featured', 'display_order', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='OnlineOrderItem',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('product_name', models.CharField(max_length=255, verbose_name='Nom du produit')),
                ('product_sku', models.CharField(max_length=100, verbose_name='SKU')),
                ('quantity', models.IntegerField(validators=[django.core.validators.MinValueValidator(1)], verbose_name='Quantité')),
                ('unit_price', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Prix unitaire')),
                ('subtotal', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Sous-total')),
                ('was_on_sale', models.BooleanField(default=False, verbose_name='Était en promotion')),
                ('original_price', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Prix original')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('order', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='ecommerce.onlineorder', verbose_name='Commande')),
                ('online_product', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='order_items', to='ecommerce.onlineproduct', verbose_name='Produit')),
            ],
            options={
                'verbose_name': 'Article commande',
                'verbose_name_plural': 'Articles commandes',
                'db_table': 'ecommerce_online_order_items',
                'ordering': ['created_at'],
            },
        ),
        migrations.CreateModel(
            name='OnlineStore',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('store_name', models.CharField(max_length=255, verbose_name='Nom de la boutique')),
                ('store_description', models.TextField(blank=True, verbose_name='Description')),
                ('store_logo', models.ImageField(blank=True, null=True, upload_to='store/logos/', verbose_name='Logo')),
                ('store_banner', models.ImageField(blank=True, null=True, upload_to='store/banners/', verbose_name='Bannière')),
                ('delivery_enabled', models.BooleanField(default=True, verbose_name='Livraison activée')),
                ('pickup_enabled', models.BooleanField(default=True, verbose_name='Retrait en pharmacie activé')),
                ('delivery_fee', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10, verbose_name='Frais de livraison')),
                ('free_delivery_threshold', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Montant minimum pour livraison gratuite', max_digits=10, verbose_name='Seuil livraison gratuite')),
                ('delivery_zones', models.TextField(blank=True, help_text='Zones de livraison (une par ligne)', verbose_name='Zones de livraison')),
                ('estimated_delivery_time', models.CharField(default='24-48h', max_length=100, verbose_name='Délai de livraison estimé')),
                ('payment_on_delivery', models.BooleanField(default=True, verbose_name='Paiement à la livraison')),
                ('mobile_money_enabled', models.BooleanField(default=False, verbose_name='Mobile Money activé')),
                ('card_payment_enabled', models.BooleanField(default=False, verbose_name='Paiement par carte activé')),
                ('minimum_order_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10, verbose_name='Montant minimum de commande')),
                ('contact_email', models.EmailField(blank=True, max_length=254, validators=[django.core.validators.EmailValidator()], verbose_name='Email de contact')),
                ('contact_phone', models.CharField(blank=True, max_length=20, verbose_name='Téléphone de contact')),
                ('whatsapp_number', models.CharField(blank=True, max_length=20, verbose_name='Numéro WhatsApp')),
                ('opening_hours', models.TextField(blank=True, help_text="Horaires d'ouverture", verbose_name='Horaires')),
                ('meta_title', models.CharField(blank=True, max_length=255, verbose_name='Meta titre')),
                ('meta_description', models.TextField(blank=True, verbose_name='Meta description')),
                ('meta_keywords', models.TextField(blank=True, verbose_name='Mots-clés')),
                ('is_active', models.BooleanField(default=True, verbose_name='Boutique active')),
                ('maintenance_mode', models.BooleanField(default=False, verbose_name='Mode maintenance')),
                ('maintenance_message', models.TextField(blank=True, verbose_name='Message de maintenance')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('pharmacie', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='online_store', to='gestion_compte.pharmacie', verbose_name='Pharmacie')),
            ],
            options={
                'verbose_name': 'Boutique en ligne',
                'verbose_name_plural': 'Boutiques en ligne',
                'db_table': 'ecommerce_online_stores',
            },
        ),
        migrations.AddField(
            model_name='onlineproduct',
            name='store',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='online_products', to='ecommerce.onlinestore', verbose_name='Boutique'),
        ),
        migrations.AddField(
            model_name='onlineorder',
            name='store',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='online_orders', to='ecommerce.onlinestore', verbose_name='Boutique'),
        ),
        migrations.CreateModel(
            name='Cart',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('session_key', models.CharField(blank=True, max_length=255, verbose_name='Clé de session')),
                ('is_active', models.BooleanField(default=True, verbose_name='Actif')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('abandoned_at', models.DateTimeField(blank=True, null=True, verbose_name='Abandonné le')),
                ('customer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='shopping_carts', to='gestion_rh.client', verbose_name='Client')),
                ('store', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='carts', to='ecommerce.onlinestore', verbose_name='Boutique')),
            ],
            options={
                'verbose_name': 'Panier',
                'verbose_name_plural': 'Paniers',
                'db_table': 'ecommerce_carts',
                'ordering': ['-updated_at'],
            },
        ),
        migrations.CreateModel(
            name='OrderStatusHistory',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('status', models.CharField(choices=[('pending', 'En attente'), ('confirmed', 'Confirmée'), ('processing', 'En préparation'), ('ready', 'Prête'), ('shipped', 'Expédiée'), ('delivered', 'Livrée'), ('cancelled', 'Annulée'), ('refunded', 'Remboursée')], max_length=20, verbose_name='Statut')),
                ('comment', models.TextField(blank=True, verbose_name='Commentaire')),
                ('customer_notified', models.BooleanField(default=False, verbose_name='Client notifié')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('changed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='order_status_changes', to=settings.AUTH_USER_MODEL, verbose_name='Modifié par')),
                ('order', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='status_history', to='ecommerce.onlineorder', verbose_name='Commande')),
            ],
            options={
                'verbose_name': 'Historique statut',
                'verbose_name_plural': 'Historiques statuts',
                'db_table': 'ecommerce_order_status_history',
                'ordering': ['created_at'],
            },
        ),
        migrations.CreateModel(
            name='ProductImage',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('image', models.ImageField(upload_to='products/online/gallery/%Y/%m/', verbose_name='Image')),
                ('alt_text', models.CharField(blank=True, max_length=255, verbose_name='Texte alternatif')),
                ('display_order', models.IntegerField(default=0, verbose_name="Ordre d'affichage")),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('online_product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='additional_images', to='ecommerce.onlineproduct', verbose_name='Produit en ligne')),
            ],
            options={
                'verbose_name': 'Image produit',
                'verbose_name_plural': 'Images produits',
                'db_table': 'ecommerce_product_images',
                'ordering': ['display_order', 'created_at'],
            },
        ),
        migrations.CreateModel(
            name='ProductReview',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('rating', models.IntegerField(choices=[(1, '⭐'), (2, '⭐⭐'), (3, '⭐⭐⭐'), (4, '⭐⭐⭐⭐'), (5, '⭐⭐⭐⭐⭐')], validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)], verbose_name='Note')),
                ('title', models.CharField(blank=True, max_length=255, verbose_name='Titre')),
                ('comment', models.TextField(verbose_name='Commentaire')),
                ('verified_purchase', models.BooleanField(default=False, verbose_name='Achat vérifié')),
                ('is_approved', models.BooleanField(default=False, verbose_name='Approuvé')),
                ('moderation_notes', models.TextField(blank=True, verbose_name='Notes de modération')),
                ('helpful_count', models.IntegerField(default=0, verbose_name="Nombre de 'utile'")),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('customer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='product_reviews', to='gestion_rh.client', verbose_name='Client')),
                ('moderated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reviews_moderated', to=settings.AUTH_USER_MODEL, verbose_name='Modéré par')),
                ('online_product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reviews', to='ecommerce.onlineproduct', verbose_name='Produit')),
            ],
            options={
                'verbose_name': 'Avis produit',
                'verbose_name_plural': 'Avis produits',
                'db_table': 'ecommerce_product_reviews',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PromoCode',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('code', models.CharField(max_length=50, unique=True, verbose_name='Code')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('discount_type', models.CharField(choices=[('percentage', 'Pourcentage'), ('fixed', 'Montant fixe'), ('free_delivery', 'Livraison gratuite')], max_length=20, verbose_name='Type de réduction')),
                ('discount_value', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Pourcentage ou montant fixe', max_digits=10, verbose_name='Valeur réduction')),
                ('min_purchase_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10, verbose_name="Montant minimum d'achat")),
                ('max_discount_amount', models.DecimalField(blank=True, decimal_places=2, help_text='Réduction maximale (pour les pourcentages)', max_digits=10, null=True, verbose_name='Réduction max')),
                ('usage_limit', models.IntegerField(blank=True, help_text="Nombre max d'utilisations (null = illimité)", null=True, verbose_name="Limite d'utilisation")),
                ('usage_limit_per_customer', models.IntegerField(default=1, validators=[django.core.validators.MinValueValidator(1)], verbose_name='Limite par client')),
                ('times_used', models.IntegerField(default=0, verbose_name='Fois utilisé')),
                ('valid_from', models.DateTimeField(verbose_name='Valide à partir de')),
                ('valid_until', models.DateTimeField(verbose_name="Valide jusqu'à")),
                ('is_active', models.BooleanField(default=True, verbose_name='Actif')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('applicable_categories', models.ManyToManyField(blank=True, related_name='promo_codes', to='gestion_vente.productcategory', verbose_name='Catégories applicables')),
                ('applicable_products', models.ManyToManyField(blank=True, related_name='promo_codes', to='ecommerce.onlineproduct', verbose_name='Produits applicables')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='promo_codes_created', to=settings.AUTH_USER_MODEL, verbose_name='Créé par')),
                ('store', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='promo_codes', to='ecommerce.onlinestore', verbose_name='Boutique')),
            ],
            options={
                'verbose_name': 'Code promo',
                'verbose_name_plural': 'Codes promo',
                'db_table': 'ecommerce_promo_codes',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='onlineorder',
            name='promo_code',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='orders_used', to='ecommerce.promocode', verbose_name='Code promo'),
        ),
        migrations.CreateModel(
            name='PromoCodeUsage',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('discount_amount', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Montant réduction')),
                ('used_at', models.DateTimeField(auto_now_add=True)),
                ('customer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='promo_code_usages', to='gestion_rh.client', verbose_name='Client')),
                ('order', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='promo_usage', to='ecommerce.onlineorder', verbose_name='Commande')),
                ('promo_code', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='usages', to='ecommerce.promocode', verbose_name='Code promo')),
            ],
            options={
                'verbose_name': 'Utilisation code promo',
                'verbose_name_plural': 'Utilisations codes promo',
                'db_table': 'ecommerce_promo_code_usages',
                'ordering': ['-used_at'],
            },
        ),
        migrations.CreateModel(
            name='Wishlist',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('customer', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='wishlist', to='gestion_rh.client', verbose_name='Client')),
            ],
            options={
                'verbose_name': 'Liste de souhaits',
                'verbose_name_plural': 'Listes de souhaits',
                'db_table': 'ecommerce_wishlists',
            },
        ),
        migrations.CreateModel(
            name='WishlistItem',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('notify_on_price_drop', models.BooleanField(default=False, verbose_name='Notifier si baisse de prix')),
                ('notify_on_availability', models.BooleanField(default=False, verbose_name='Notifier si disponible')),
                ('added_at', models.DateTimeField(auto_now_add=True)),
                ('online_product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='wishlist_items', to='ecommerce.onlineproduct', verbose_name='Produit')),
                ('wishlist', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='ecommerce.wishlist', verbose_name='Liste de souhaits')),
            ],
            options={
                'verbose_name': 'Article liste de souhaits',
                'verbose_name_plural': 'Articles listes de souhaits',
                'db_table': 'ecommerce_wishlist_items',
                'ordering': ['-added_at'],
            },
        ),
        migrations.CreateModel(
            name='CustomerNotification',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('notification_type', models.CharField(choices=[('order_confirmed', 'Commande confirmée'), ('order_shipped', 'Commande expédiée'), ('order_delivered', 'Commande livrée'), ('order_cancelled', 'Commande annulée'), ('price_drop', 'Baisse de prix'), ('back_in_stock', 'Retour en stock'), ('promo_code', 'Code promo'), ('abandoned_cart', 'Panier abandonné'), ('newsletter', 'Newsletter'), ('other', 'Autre')], max_length=30, verbose_name='Type')),
                ('title', models.CharField(max_length=255, verbose_name='Titre')),
                ('message', models.TextField(verbose_name='Message')),
                ('is_read', models.BooleanField(default=False, verbose_name='Lu')),
                ('read_at', models.DateTimeField(blank=True, null=True, verbose_name='Lu le')),
                ('sent_via_email', models.BooleanField(default=False, verbose_name='Envoyé par email')),
                ('sent_via_sms', models.BooleanField(default=False, verbose_name='Envoyé par SMS')),
                ('sent_via_push', models.BooleanField(default=False, verbose_name='Envoyé par push')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('customer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ecommerce_notifications', to='gestion_rh.client', verbose_name='Client')),
                ('order', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to='ecommerce.onlineorder', verbose_name='Commande')),
                ('online_product', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to='ecommerce.onlineproduct', verbose_name='Produit')),
            ],
            options={
                'verbose_name': 'Notification client',
                'verbose_name_plural': 'Notifications clients',
                'db_table': 'ecommerce_customer_notifications',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['customer', 'is_read', '-created_at'], name='ecommerce_c_custome_78ab1e_idx')],
            },
        ),
        migrations.CreateModel(
            name='CartItem',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('quantity', models.IntegerField(default=1, validators=[django.core.validators.MinValueValidator(1)], verbose_name='Quantité')),
                ('unit_price', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Prix unitaire')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('cart', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='ecommerce.cart', verbose_name='Panier')),
                ('online_product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cart_items', to='ecommerce.onlineproduct', verbose_name='Produit')),
            ],
            options={
                'verbose_name': 'Article panier',
                'verbose_name_plural': 'Articles panier',
                'db_table': 'ecommerce_cart_items',
                'ordering': ['created_at'],
                'unique_together': {('cart', 'online_product')},
            },
        ),
        migrations.AddIndex(
            model_name='onlineproduct',
            index=models.Index(fields=['store', 'is_visible'], name='ecommerce_o_store_i_647541_idx'),
        ),
        migrations.AddIndex(
            model_name='onlineproduct',
            index=models.Index(fields=['is_featured', 'is_visible'], name='ecommerce_o_is_feat_81401b_idx'),
        ),
        migrations.AddIndex(
            model_name='onlineproduct',
            index=models.Index(fields=['product'], name='ecommerce_o_product_b9be22_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='onlineproduct',
            unique_together={('store', 'product')},
        ),
        migrations.AddIndex(
            model_name='cart',
            index=models.Index(fields=['customer', 'is_active'], name='ecommerce_c_custome_371534_idx'),
        ),
        migrations.AddIndex(
            model_name='cart',
            index=models.Index(fields=['session_key'], name='ecommerce_c_session_e5fec9_idx'),
        ),
        migrations.AddIndex(
            model_name='productreview',
            index=models.Index(fields=['online_product', 'is_approved'], name='ecommerce_p_online__c6e7b5_idx'),
        ),
        migrations.AddIndex(
            model_name='productreview',
            index=models.Index(fields=['rating'], name='ecommerce_p_rating_8c7d97_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='productreview',
            unique_together={('online_product', 'customer')},
        ),
        migrations.AddIndex(
            model_name='promocode',
            index=models.Index(fields=['code'], name='ecommerce_p_code_be1a97_idx'),
        ),
        migrations.AddIndex(
            model_name='promocode',
            index=models.Index(fields=['is_active', 'valid_from', 'valid_until'], name='ecommerce_p_is_acti_d81cdf_idx'),
        ),
        migrations.AddIndex(
            model_name='onlineorder',
            index=models.Index(fields=['order_number'], name='ecommerce_o_order_n_c776d3_idx'),
        ),
        migrations.AddIndex(
            model_name='onlineorder',
            index=models.Index(fields=['customer', '-created_at'], name='ecommerce_o_custome_63703d_idx'),
        ),
        migrations.AddIndex(
            model_name='onlineorder',
            index=models.Index(fields=['status', '-created_at'], name='ecommerce_o_status_32ea87_idx'),
        ),
        migrations.AddIndex(
            model_name='onlineorder',
            index=models.Index(fields=['payment_status'], name='ecommerce_o_payment_92a9f8_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='wishlistitem',
            unique_together={('wishlist', 'online_product')},
        ),
    ]
